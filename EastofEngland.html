<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>East of England Region</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.0/echarts.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: #f0f0f0; }
        #chart-container { width: 100vw; height: 100vh; }
        .back-button {
            position: absolute; top: 20px; left: 20px; z-index: 1000;
            padding: 5px 15px; background-color: #fff; border: 1px solid #ccc;
            cursor: pointer; font-family: sans-serif;
        }
    </style>
</head>
<body>
<button class="back-button" onclick="window.location.href='main.html'">Back to UK Map</button>
<div id="chart-container"></div>
<script>
    // East of England Teams
    const teamsData = [
        {team: "Norwich City", lat: 52.621733, lon: 1.310357},
        {team: "Ipswich Town", lat: 52.054945, lon: 1.145328},
        {team: "Watford", lat: 51.649873, lon: -0.401329}
    ];

    const chartDom = document.getElementById('chart-container');
    const myChart = echarts.init(chartDom);

    fetch("gb.json")
        .then(response => response.json())
        .then(geoData => {
            // East of England District IDs
            const regionIds = new Set(["GBNFK","GBSFK","GBCAM","GBPET","GBESS","GBSOU","GBTHR","GBHRT","GBBDF","GBLUT","GBCEN","GBCBF","GBPTE","GBSOS"]);

            geoData.features = geoData.features.filter(feature => regionIds.has(feature.properties.id));

            echarts.registerMap('EastofEngland', geoData);

            const option = {
                backgroundColor: '#f0f0f0',
                title: { text: 'East of England', left: 'center', top: 20 },
                geo: {
                    map: 'EastofEngland',
                    roam: true,
                    label: { show: true, color: '#999', fontSize: 10 },
                    itemStyle: {
                        areaColor: '#9999FF', // Orchid
                        borderColor: '#fff',
                        borderWidth: 1
                    },
                    emphasis: {
                        itemStyle: { areaColor: '#D8BFD8' },
                        label: { show: true, color: '#000' }
                    }
                },
                series: [
                    {
                        name: 'Stadiums',
                        type: 'scatter',
                        coordinateSystem: 'geo',
                        data: teamsData.map(item => ({
                            name: item.team,
                            value: [item.lon, item.lat]
                        })),
                        symbolSize: 10,
                        itemStyle: { color: 'red', borderColor: '#fff', borderWidth: 1 },
                        label: {
                            show: true, formatter: '{b}', position: 'right',
                            color: '#333', fontSize: 10, backgroundColor: 'rgba(255,255,255,0.7)', padding: [2, 4]
                        },
                        emphasis: { scale: true }
                    }
                ],
                tooltip: { trigger: 'item', formatter: '{b}' }
            };

            myChart.setOption(option);
            myChart.on('click', function(params) {
                if (params.componentType === 'series') {
                    window.location.href = params.name.replace(/\s+/g, '') + ".html";
                }
            });
        });
    window.addEventListener('resize', myChart.resize);
</script>
</body>
</html>
